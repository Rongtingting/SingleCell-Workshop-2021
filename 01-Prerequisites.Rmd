# Prerequisites {#env-pre}


For going the modules in this part, we requires both R packages and non-R 
packages (Python and command line). Don't worry, we prepared to make it minimal
for you.

## R packages
In modules in this part, we require a few R packages, which you could install as
follows,
```
# install reticulate for module 4.2
install.packages("reticulate")
```

```
# install devtools for module 5.1
install.packages('devtools')
```

```
# install cardelino for module 5.1
devtools::install_github("single-cell-genetics/cardelino", build_vignettes = FALSE)
```

And install JAGS manually for Windows or Mac from here (before installing rjags
R package): https://sourceforge.net/projects/mcmc-jags/files/JAGS/4.x/

```
# install rjags for module 5.2
install.packages('rjags')
```

```
# install inferCNV for module 5.2
if (!requireNamespace("BiocManager", quietly = TRUE))
     install.packages("BiocManager")
BiocManager::install("infercnv")
```

## Python package scvelo with Anaconda
Additionally, one Python package `scvelo` is needed for the module 4.2. 
For easier installation and cleaner environment, we recommend using [Anaconda](https://docs.anaconda.com/anaconda/) (a popular environment management tool) with Python 3.8 here.

### Installation on Windows {#conda_install_windows}

1. Go to [Anaconda](https://www.anaconda.com/products/individual) webpage; click 'Download' button to download Anaconda for Windows (with Python3.8).

```{r conda_fig1, echo=FALSE, message=FALSE, warning=FALSE, fig.align="center", out.width='65%'}
knitr::include_graphics("./images/conda_download_installer1.png")
```

2. Double click the downloaded file and install Anaconda following the instructions. (Note, this requires about 3G disk space)

3. Open `Anaconda Powershell Prompt` and then install `scVelo` by typing `pip install scvelo==0.2.2` in the shell.

```{r conda_fig2, echo=FALSE, message=FALSE, warning=FALSE, fig.align="center", out.width='65%'}
knitr::include_graphics("./images/conda_scvelo.png")
```

You have successfully set up the base environment of conda and installed the `scVelo` tool in this environment.

### Installation on Linux {#conda_install_linux}

1. Open Linux Shell.

2. Download Anaconda installer with `wget https://repo.anaconda.com/archive/Anaconda3-2021.05-Linux-x86_64.sh`

3. Install Anaconda with `bash Anaconda3-2021.05-Linux-x86_64.sh`; follow the prompts on the installer screens.  

When you are asked `Do you wish the installer to initialize Anaconda3 by running conda init`, we recommend "yes".

4. Close and then re-open your Shell, to make the changes take effect.

5. Type `conda list` in Shell. 

A list of installed packages appears if it has been installed correctly.  

### Installation on macOS {#conda_install_mac}

In macOS, you could install Anaconda either in graphical mode or command line mode.

**Installation in Graphical Mode**

This mode is very similar to [Installation on Windows](#conda_install_windows).

1. Go to [Anaconda](https://www.anaconda.com/products/individual) webpage; click 'Get Additional Installers' button and then
   select the `64-Bit Graphical Installer` for MacOS.

```{r conda_fig3, echo=FALSE, message=FALSE, warning=FALSE, fig.align="center", out.width='65%'}
knitr::include_graphics("./images/conda_download_installer2.png")
```

2. Install Anaconda following the instructions.

3. Open `Anaconda Powershell Prompt` and then install `scVelo` by typing `pip install scvelo==0.2.2` in the shell.

**Installation in Command Line Mode**

This mode is very similar to [Installation on Linux](#conda_install_linux).

1. Open macOS Terminal

2. Download Anaconda installer with `wget https://repo.anaconda.com/archive/Anaconda3-2021.05-MacOSX-x86_64.sh`

3. Install Anaconda with `bash Anaconda3-2021.05-MacOSX-x86_64.sh`; follow the prompts on the installer screens.  

When you are asked `Do you wish the installer to initialize Anaconda3 by running conda init`, we recommend "yes".

4. Close and then re-open your Shell, to make the changes take effect.

5. Type `conda list` in Shell. 

A list of installed packages appears if it has been installed correctly.  

